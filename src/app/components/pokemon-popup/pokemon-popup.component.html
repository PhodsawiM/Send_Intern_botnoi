<div class="popup-overlay" (click)="close()">

  <div class="popup" (click)="$event.stopPropagation()">

    <div class="SSerch">
      <input class="search-box"
             type="text"
             placeholder="Search name"
             [(ngModel)]="searchName"
             (input)="search()" />
  
      <input class="search-box"
             type="text"
             placeholder="Search type"
             [(ngModel)]="searchType"
             (input)="search()" />
      <button (click)="close()" class="remove-btn"> X </button>
    </div>

    <div class="popup-content">

      <div class="card-grid">
        <!-- <div class="card-item" *ngFor="let c of cards" (click)="selectCard(c)"> -->
        <div class="card-item" *ngFor="let c of cards"  [style.background-color]="getCardColor(c)">
          <img [src]="c.imageUrlHiRes" />
          
          
          <div class="info">
            <div class="name_and_select">
              <p style="font-size: 30px; font-weight: bold;">{{ c.name }}</p>
              <div (click)="selectCard(c)">+</div>
            </div>
            <div class="stat-row" *ngIf="c.supertype === 'Pokémon'">
              <span class="stat-label">HP</span>
              <div class="progress-bg">
                <div class="progress-fill" [style.width.%]="getHpWidth(c.hp)"></div>
              </div>
              <span class="stat-value" style="margin-left:8px; min-width:36px; text-align:right;">
                {{ getHpNumber(c.hp) }}
              </span>
            </div>

            <div class="stat-row" *ngIf="c.supertype === 'Pokémon'">
              <span class="stat-label">STR</span>
              <div class="progress-bg">
                <div class="progress-fill" [style.width.%]="getStrWidth(c.attacks)"></div>
              </div>
              <span class="stat-value" style="margin-left:8px; min-width:36px; text-align:right;">
                {{ (getStrWidth(c.attacks) | number) }}%
              </span>
            </div>

            <div class="stat-row" *ngIf="c.supertype === 'Pokémon'">
              <span class="stat-label">WEAK</span>
              <div class="progress-bg">
                <div class="progress-fill" [style.width.%]="getWeakWidth(c.weaknesses)"></div>
              </div>
              <span class="stat-value" style="margin-left:8px; min-width:36px; text-align:right;">
                {{ getWeakCount(c.weaknesses) }}
              </span>
            </div>

            <div class="stat-row" *ngIf="c.supertype === 'Pokémon'">
              <span class="stat-label">DMG</span>
              <div class="progress-bg">
                <div class="progress-fill" [style.width.%]="getDamagePercent(c.attacks)"></div>
              </div>
              <span class="stat-value" style="margin-left:8px; min-width:36px; text-align:right;">
                {{ getDamageValue(c.attacks) }}
              </span>
            </div>

            <div class="stat-row" *ngIf="c.supertype === 'Pokémon'">
              <span class="stat-label">HAP</span>
              <!-- <div class="progress-bg">
                <div class="progress-fill" [style.width.%]="getHappinessPercent(c)"></div>
              </div> -->
              <div class="happiness-row">
                <div>
                  <span *ngFor="let _ of getHappinessIcons(getHappiness(c))" class="happy-icon">
                    <img src="assets/cute.png" width="14" />
                  </span>
                </div>
                <span class="stat-value" style="margin-left:8px; min-width:36px; text-align:right;">
                  {{ getHappiness(c) }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
